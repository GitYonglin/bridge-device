<app-left>
  <div class="sider sider-menu">
    <!-- <task-menu style="overflow: hidden;" dbNmae="grouting" (menuChange)="onBridge($event)" #taskmenu></task-menu> -->
    <app-scroll-menu style="flex: 1;" [dbName]="dbName" [stateFunc]="menuStateFunc" #menu (menuChange)="selectBridge($event)"></app-scroll-menu>
  </div>
  <div class="main " style="width: 100%; height: 100%;">
      <div *ngIf="data?.template" class="task-template">
        <div class="text">模板</div>
      </div>
      <nz-tabset class="task-tabset " (nzSelectChange)="changeTabs($event)" [nzShowPagination]="false">
        <nz-tab nzTitle="基础信息">
          <grouting-mian *ngIf="formData"
            [formData]="formData"
            [groutingTask]="data"
            (outSelectComponent)="selectComponent($event)"
            [edit]="appS.edit"
            [unDel]="otherUnDel"
            ></grouting-mian>
          <div class="operation" *ngIf="menu.projectId">
            <app-operat
              [dbName]="dbName"
              [formData]="formData"
              [addFilterFun]="addFilterFun"
              [updateFilterFun]="updateFilterFun"
              [coprState]="true"
              [valid]="formData.valid"
              (outEdit)="onEdit($event)"
              (outEditOk)="editOk($event)"
              (outDelete)="delete()"
              (outModification)="onEdit(null, true)"
              (outCancelEdit)="editOk(null)"
              >
              <button nz-button nzType="primary" (click)="upload()" [disabled]="!(data?.groutingInfo?.length > 0) || !uploading"><i nz-icon nzType="cloud-upload"
                nzTheme="outline"></i>上传</button>
              <button nz-button nzType="primary" (click)="test()" *ngIf="appS.platform === 'debug'">测试</button>
            </app-operat>
          </div>
        </nz-tab>
        <nz-tab nzTitle="其他">
          <p>创建者：{{data?.user}}</p>
          <p>创建日期：{{data?.createdDate | date: "yyyy.MM.dd HH:mm"}}</p>
          <p>修改日期：{{data?.modificationDate | date: "yyyy.MM.dd HH:mm"}}</p>
        </nz-tab>
      </nz-tabset>
    </div>
</app-left>
<app-delete-modal *ngIf="deleteShow" (outDelete)="deleteOk($event)"></app-delete-modal>
